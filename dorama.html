<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dorama | Planeta Dorama üåç</title>
<link rel="stylesheet" href="style.css">

<style>
:root{
  --rosa:#ff7eb3;
  --roxo:#b983ff;
  --texto:#333;
}

body{
  margin:0;
  font-family:'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #ffe6f2, #fff0f7);
  color: var(--texto);
}

header{
  text-align:center;
  padding:20px;
  background:linear-gradient(90deg,var(--rosa),var(--roxo));
  color:white;
}
header h1{ margin:0; }
header a{
  color:white;
  text-decoration:none;
  font-weight:bold;
  display:inline-block;
  margin-top:8px;
}

/* HERO */
.hero{
  position: relative;
  max-width: 1100px;
  margin: 22px auto 0;
  border-radius: 22px;
  overflow: hidden;
  box-shadow: 0 16px 40px rgba(0,0,0,0.14);
}
.hero::before{
  content:"";
  position:absolute;
  inset:0;
  background-image: var(--hero-bg);
  background-size: cover;
  background-position: center;
  filter: blur(22px);
  transform: scale(1.15);
}
.hero::after{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(90deg,
    rgba(20,0,20,0.75),
    rgba(20,0,20,0.40),
    rgba(20,0,20,0.10)
  );
}

.hero-inner{
  position: relative;
  z-index:1;
  padding:26px;
  display:grid;
  grid-template-columns: 360px 1fr;
  gap:22px;
  align-items:center;
  color:#fff;
}

@media(max-width:900px){
  .hero{ margin:16px 14px 0; }
  .hero-inner{
    grid-template-columns:1fr;
    text-align:center;
  }
}

/* Poster */
.poster{
  max-width:360px;
  aspect-ratio:2/3;
  border-radius:18px;
  overflow:hidden;
  background:rgba(255,255,255,0.08);
  box-shadow:0 12px 30px rgba(0,0,0,0.28);
  margin:auto;
}
.poster img{
  width:100%;
  height:100%;
  object-fit:contain;
}

/* T√≠tulo */
.hero-title{
  margin:0 0 10px;
  font-size:34px;
}
@media(max-width:900px){
  .hero-title{ font-size:26px; }
}

/* Chips */
.chip{
  display:inline-block;
  padding:8px 12px;
  border-radius:999px;
  background:rgba(255,255,255,0.15);
  margin:6px 6px 0 0;
  font-size:13px;
  font-weight:bold;
}

/* Estrelas */
.stars{
  font-size:18px;
  letter-spacing:2px;
}

/* Bot√µes */
.hero-actions{
  margin-top:14px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
@media(max-width:900px){
  .hero-actions{ justify-content:center; }
}

.btn{
  padding:12px 16px;
  border-radius:14px;
  border:none;
  cursor:pointer;
  font-weight:bold;
  font-size:15px;
  background:var(--rosa);
  color:#fff;
}
.btn:hover{ background:var(--roxo); }

.btn-sec{
  background:rgba(255,255,255,0.18);
  border:1px solid rgba(255,255,255,0.25);
}
.btn-sec:hover{
  background:rgba(255,255,255,0.25);
}

/* Conte√∫do */
#conteudo-detalhe{
  max-width:980px;
  margin:18px auto 50px;
  background:white;
  padding:28px;
  border-radius:20px;
  box-shadow:0 10px 25px rgba(0,0,0,0.10);
}
@media(max-width:900px){
  #conteudo-detalhe{ margin:16px 14px; padding:20px; }
}

.resumo-trailer{
  display:grid;
  grid-template-columns:1.05fr 0.95fr;
  gap:18px;
}
@media(max-width:900px){
  .resumo-trailer{ grid-template-columns:1fr; }
}

.texto{
  font-size:18px;
  line-height:1.8;
}

/* Trailer */
.trailer-box h3{
  font-size:16px;
  color:#d63384;
  margin-bottom:8px;
}
.video-wrap{
  aspect-ratio:16/9;
  border-radius:16px;
  overflow:hidden;
  border:2px solid rgba(255,126,179,0.6);
  box-shadow:0 16px 38px rgba(0,0,0,0.22);
}
.video-wrap iframe{
  width:100%;
  height:100%;
  border:0;
}

/* Relacionados */
.relacionados{
  margin-top:28px;
}
.cards-mini{
  display:flex;
  flex-wrap:wrap;
  gap:14px;
}
.card-mini{
  width:190px;
  border-radius:16px;
  overflow:hidden;
  box-shadow:0 6px 18px rgba(0,0,0,0.10);
  cursor:pointer;
}
.card-mini img{
  width:100%;
  height:230px;
  object-fit:cover;
}
.card-mini .info{
  padding:10px;
}
</style>
</head>

<body>

<header>
  <h1>üåç Planeta Dorama</h1>
  <a href="index.html">‚¨Ö Voltar</a>
</header>

<section id="hero" class="hero" style="display:none;">
  <div class="hero-inner" id="hero-inner"></div>
</section>

<section id="conteudo-detalhe"></section>

<script src="doramas.js"></script>
<script>

const FAV_KEY="pd_favoritos_v1";

function getFav(){ return JSON.parse(localStorage.getItem(FAV_KEY)||"[]"); }
function setFav(l){ localStorage.setItem(FAV_KEY,JSON.stringify(l)); }
function toggleFav(nome){
  let l=getFav();
  if(l.includes(nome)) l=l.filter(n=>n!==nome);
  else l.push(nome);
  setFav(l);
  return l.includes(nome);
}

function estrelas(nota){
  const m=String(nota||"").match(/[\d]+([.,]\d+)?/);
  if(!m) return "";
  const n=parseFloat(m[0].replace(",","."));
  const n5=n/2;
  const cheio=Math.floor(n5);
  const meio=n5%1>=0.5?1:0;
  const vazio=5-cheio-meio;
  return "‚òÖ".repeat(cheio)+(meio?"‚òÜ":"")+"‚ú©".repeat(vazio);
}

function compartilhar(nome){
  const url=window.location.href;
  const texto=`üé¨ Olha esse dorama incr√≠vel: ${nome}\n\nVeja aqui: ${url}`;

  if(navigator.share){
    navigator.share({ title:nome, text:texto, url:url });
  }else{
    const wa="https://wa.me/?text="+encodeURIComponent(texto);
    window.open(wa,"_blank");
  }
}

function carregar(){
  const nome=new URLSearchParams(window.location.search).get("nome");
  const dorama=doramas.find(d=>d.nome===nome);
  if(!dorama) return;

  const img=dorama.imagem;
  const fav=getFav().includes(nome);

  document.getElementById("hero").style.display="block";
  document.getElementById("hero").style.setProperty("--hero-bg",`url('${img}')`);

  document.getElementById("hero-inner").innerHTML=`
    <div class="poster">
      <img src="${img}">
    </div>
    <div>
      <h2 class="hero-title">${dorama.nome}</h2>
      <div>
        ${dorama.ano?`<span class="chip">${dorama.ano}</span>`:""}
        ${dorama.pais?`<span class="chip">${dorama.pais}</span>`:""}
        ${dorama.episodios?`<span class="chip">${dorama.episodios} eps</span>`:""}
        <span class="chip">‚≠ê ${dorama.nota}</span>
        <span class="chip"><span class="stars">${estrelas(dorama.nota)}</span></span>
      </div>
      <div class="hero-actions">
        <button class="btn" onclick="toggleFav('${nome}'); location.reload();">
          ${fav?"üíú Favoritado":"ü§ç Favoritar"}
        </button>
        <button class="btn btn-sec" onclick="document.getElementById('secTrailer')?.scrollIntoView({behavior:'smooth'});">
          üé¨ Trailer
        </button>
        <button class="btn btn-sec" onclick="compartilhar('${nome}')">
          üîó Compartilhar
        </button>
      </div>
    </div>
  `;

  document.getElementById("conteudo-detalhe").innerHTML=`
    <div class="resumo-trailer">
      <div>
        <p class="texto">${dorama.descricao}</p>
      </div>
      ${dorama.trailer?`
      <div class="trailer-box" id="secTrailer">
        <h3>üé¨ Trailer</h3>
        <div class="video-wrap">
          <iframe src="${dorama.trailer}" allowfullscreen></iframe>
        </div>
      </div>
      `:""}
    </div>
  `;

  document.title=dorama.nome+" | Planeta Dorama üåç";
}

carregar();
</script>

</body>
</html>
