<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clube do Dorama ğŸ’•</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #fff0f6;
    color: #333;
}
header {
    background: linear-gradient(90deg, #ff7eb3, #b983ff);
    padding: 20px;
    text-align: center;
    color: white;
}
nav a {
    margin: 0 10px;
    color: white;
    text-decoration: none;
    font-weight: bold;
}
section {
    padding: 40px 20px;
}
h2 {
    text-align: center;
    color: #b4005a;
}
.cards {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
}
.card {
    background: white;
    width: 260px;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
}
.card:hover {
    transform: translateY(-8px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}
.card img {
    width: 100%;
    height: 350px;
    object-fit: cover;
}
.card div {
    padding: 15px;
}
button {
    padding:10px 15px;
    margin:5px;
    background:#ff7eb3;
    color:white;
    border:none;
    border-radius:8px;
    cursor:pointer;
}
button:hover {
    background:#b983ff;
}
footer {
    background: #b983ff;
    color: white;
    text-align: center;
    padding: 15px;
}
input[type=text] {
    padding:10px;
    width:250px;
    border-radius: 5px;
    border:1px solid #ccc;
}
</style>
</head>

<body>

<header>
    <h1>ğŸ¬ Clube do Dorama</h1>
    <p>Descubra doramas perfeitos para o seu momento ğŸ’•</p>
    <nav>
        <a href="#inicio">InÃ­cio</a>
        <a href="#listas">Listas ğŸ’–</a>
        <a href="#todos">Todos ğŸ“š</a>
        <a href="#descubra">Descubra ğŸ¤–</a>
    </nav>
</header>

<section id="inicio">
<h2>âœ¨ Bem-vindo(a)</h2>
<p style="text-align:center; max-width:700px; margin:auto;">
O Clube do Dorama Ã© um espaÃ§o feito para quem ama histÃ³rias emocionantes,
romÃ¢nticas, divertidas e intensas.
</p>
</section>

<section id="listas">
<h2>ğŸ“‹ Listas de Doramas</h2>

<div style="text-align:center; margin-bottom:20px;">

<button onclick="window.location.href='categoria.html?tipo=romance'">
ğŸ’– RomÃ¢nticos
</button>

<button onclick="window.location.href='categoria.html?tipo=triste'">
ğŸ˜­ Tristes
</button>

<button onclick="window.location.href='categoria.html?tipo=intenso'">
ğŸ”¥ Intensos
</button>

<button onclick="window.location.href='categoria.html?tipo=alegre'">
ğŸ˜Š Leves
</button>

</div>

</section>

<section id="todos">
<h2>ğŸ“š Todos os Doramas</h2>
<div id="todos-doramas" class="cards"></div>
</section>

<section id="descubra">
<h2>ğŸ¤– Descubra seu Dorama</h2>
<p style="text-align:center;">Escreva como vocÃª estÃ¡ se sentindo:</p>
<div style="text-align:center;">
    <input type="text" id="entrada" placeholder="Ex: triste, feliz, romance...">
    <button onclick="buscar()">Buscar</button>
</div>
<div id="resultado" style="text-align:center; margin-top:20px; font-weight:bold;"></div>
</section>

<footer>
<p>ğŸ’œ Clube do Dorama â€” feito com amor</p>
</footer>

<script src="doramas.js"></script>
<script>

function carregarTodos() {
 const c = document.getElementById("todos-doramas");
 c.innerHTML = "";

 doramas.forEach(d => {
  c.innerHTML += `
   <div class="card" onclick="window.location.href='dorama.html?nome=${encodeURIComponent(d.nome)}'">
    <img src="${d.imagem}">
    <div>
     <h3>${d.nome}</h3>
     <p>${d.descricao.replaceAll("\n","<br>")}</p>
     <p>â­ ${d.nota}</p>
    </div>
   </div>`;
 });
}

/* DESCUBRIR */
function buscar() {
 const texto = document.getElementById("entrada").value.toLowerCase();

 const mapa = {
  triste:["triste","chorar","sofrer","emoÃ§Ã£o","drama"],
  romance:["amor","romance","casal","relacionamento"],
  alegre:["feliz","leve","engraÃ§ado","fofo"],
  intenso:["aÃ§Ã£o","vinganÃ§a","suspense","crime"]
 };

 let categoriasDetectadas = [];

 for (let categoria in mapa) {
  if (mapa[categoria].some(p => texto.includes(p))) {
   categoriasDetectadas.push(categoria);
  }
 }

 let resultados;

 if (categoriasDetectadas.length > 0) {
  resultados = doramas.filter(d =>
   categoriasDetectadas.some(cat => d.tags.includes(cat))
  );
 } else {
  resultados = doramas;
 }

 resultados = resultados.sort(() => 0.5 - Math.random()).slice(0,3);

 const div = document.getElementById("resultado");
 div.innerHTML = "";

 resultados.forEach(d => {
  div.innerHTML += `
   <div class="card" style="margin:10px auto; max-width:300px;">
    <img src="${d.imagem}">
    <div>
     <h3>${d.nome}</h3>
     <p>${d.descricao.replaceAll("\n","<br>")}</p>
     <p>â­ ${d.nota}</p>
    </div>
   </div>`;
 });
}

window.onload = carregarTodos;

</script>

</body>
</html>
