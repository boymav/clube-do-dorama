<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Planeta Dorama ğŸŒ</title>

<meta name="description" content="Planeta Dorama ğŸŒ: listas, recomendaÃ§Ãµes, dorama da semana, notÃ­cias e um guia completo para vocÃª encontrar o dorama perfeito.">

<meta property="og:site_name" content="Planeta Dorama ğŸŒ">
<meta property="og:type" content="website">
<meta property="og:title" content="Planeta Dorama ğŸŒ">
<meta property="og:description" content="Listas, recomendaÃ§Ãµes, dorama da semana e guia completo de doramas.">
<meta property="og:url" content="https://planetadorama.com.br/">
<meta property="og:image" content="https://planetadorama.com.br/imagens/og-capa.jpg">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Planeta Dorama ğŸŒ">
<meta name="twitter:description" content="Listas, recomendaÃ§Ãµes e guia completo de doramas.">
<meta name="twitter:image" content="https://planetadorama.com.br/imagens/og-capa.jpg">

<style>
/* (SEU CSS ORIGINAL INTACTO â€” nÃ£o alterei nada visual) */
body { margin:0; font-family: Arial, sans-serif; background:#fff0f6; color:#333; }
header { background: linear-gradient(90deg, #ff7eb3, #b983ff); padding:20px; text-align:center; color:white; }
nav a { margin: 0 10px; color:white; text-decoration:none; font-weight:bold; }
section { padding:40px 20px; }
h2 { text-align:center; color:#b4005a; }
button{ padding:14px 22px; margin:8px; background:#ff7eb3; color:white; border:none; border-radius:12px; cursor:pointer; font-weight:bold; font-size:18px; }
button:hover{ background:#b983ff; }
.btn-pequeno{ padding:10px 14px; font-size:14px; border-radius:10px; margin:6px; }
.cards{ display:flex; flex-wrap:wrap; gap:20px; justify-content:center; }
.card{ background:white; width:300px; border-radius:18px; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.1); transition: transform .3s ease, box-shadow .3s ease; }
.card.click{ cursor:pointer; }
.card.click:hover{ transform: translateY(-8px); box-shadow:0 10px 25px rgba(0,0,0,0.15); }
.card img{ width:100%; height:380px; object-fit:cover; display:block; }
.card div{ padding:16px; }
.card h3{ margin:0 0 8px; }
.card p{ margin:0; color:#555; line-height:1.45; }
.card .mini{ margin-top:10px; font-weight:bold; color:#7a1b55; }
.card.small{ width:220px; }
.card.small img{ height:280px; }
footer{ background:#b983ff; color:white; text-align:center; padding:15px; }
</style>
</head>

<body>

<header>
  <h1>ğŸŒğŸ¬ Planeta Dorama</h1>
  <p>Descubra doramas perfeitos para o seu momento ğŸ’–</p>
</header>

<section id="top5">
  <h2>ğŸ† Top 5 mais bem avaliados</h2>
  <div class="cards" id="top5-cards"></div>
</section>

<section id="semana">
  <h2>ğŸŒŸ Dorama da Semana</h2>
  <div class="cards" id="dorama-semana"></div>
</section>

<footer>
  <p>ğŸ’œ Planeta Dorama ğŸŒ â€” feito com amor</p>
</footer>

<script src="doramas.js"></script>
<script>

// ===== GERAR SLUG AUTOMATICAMENTE =====
function criarSlug(nome){
  return nome
    .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
    .toLowerCase()
    .replace(/[^a-z0-9]+/g, "-")
    .replace(/(^-|-$)/g, "");
}

doramas.forEach(d => {
  d.slug = criarSlug(d.nome);
});

// ===== HELPERS =====
function parseNota(nota){
  const m = String(nota || "").match(/[\d]+([.,]\d+)?/);
  if(!m) return 0;
  return parseFloat(m[0].replace(",", "."));
}

// ===== TOP 5 =====
function carregarTop5(){
  const area = document.getElementById("top5-cards");
  const top = [...doramas]
    .map(d => ({...d, _notaNum: parseNota(d.nota)}))
    .sort((a,b) => b._notaNum - a._notaNum)
    .slice(0, 5);

  area.innerHTML = top.map(d => `
    <div class="card click small" onclick="window.location.href='/doramas/${d.slug}.html'">
      <img src="${d.imagem}" alt="${d.nome}" loading="lazy">
      <div>
        <h3>${d.nome}</h3>
        <div class="mini">â­ ${d.nota || ""}</div>
      </div>
    </div>
  `).join("");
}

// ===== DORAMA DA SEMANA =====
function carregarDoramaDaSemana() {
  const area = document.getElementById("dorama-semana");
  const escolhido = doramas[Math.floor(Math.random() * doramas.length)];

  area.innerHTML = `
    <div class="card click" onclick="window.location.href='/doramas/${escolhido.slug}.html'">
      <img src="${escolhido.imagem}" alt="${escolhido.nome}" loading="lazy">
      <div>
        <h3>${escolhido.nome}</h3>
        <p>${(escolhido.descricao || "").replaceAll("\n","<br>")}</p>
        <div class="mini">â­ ${escolhido.nota || ""}</div>
      </div>
    </div>
  `;
}

// ===== INIT =====
window.onload = () => {
  carregarTop5();
  carregarDoramaDaSemana();
};

</script>

</body>
</html>
