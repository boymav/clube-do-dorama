<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Planeta Dorama üåç</title>

<meta name="description" content="Planeta Dorama üåç: listas, recomenda√ß√µes, dorama da semana, not√≠cias e um guia completo para voc√™ encontrar o dorama perfeito.">

<meta property="og:site_name" content="Planeta Dorama üåç">
<meta property="og:type" content="website">
<meta property="og:title" content="Planeta Dorama üåç">
<meta property="og:description" content="Listas, recomenda√ß√µes, dorama da semana e guia completo de doramas.">
<meta property="og:url" content="https://planetadorama.com.br/">
<meta property="og:image" content="https://planetadorama.com.br/imagens/og-capa.jpg">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Planeta Dorama üåç">
<meta name="twitter:description" content="Listas, recomenda√ß√µes e guia completo de doramas.">
<meta name="twitter:image" content="https://planetadorama.com.br/imagens/og-capa.jpg">

<style>
/* ===== TODO SEU CSS ORIGINAL (INALTERADO) ===== */
body { margin:0; font-family: Arial, sans-serif; background:#fff0f6; color:#333; }
header { background: linear-gradient(90deg, #ff7eb3, #b983ff); padding:20px; text-align:center; color:white; }
nav a { margin: 0 10px; color:white; text-decoration:none; font-weight:bold; }
section { padding:40px 20px; }
h2 { text-align:center; color:#b4005a; }
button{ padding:14px 22px; margin:8px; background:#ff7eb3; color:white; border:none; border-radius:12px; cursor:pointer; font-weight:bold; font-size:18px; }
button:hover{ background:#b983ff; }
.btn-pequeno{ padding:10px 14px; font-size:14px; border-radius:10px; margin:6px; }
.cards{ display:flex; flex-wrap:wrap; gap:20px; justify-content:center; }
.card{ background:white; width:300px; border-radius:18px; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.1); transition: transform .3s ease, box-shadow .3s ease; }
.card.click{ cursor:pointer; }
.card.click:hover{ transform: translateY(-8px); box-shadow:0 10px 25px rgba(0,0,0,0.15); }
.card img{ width:100%; height:380px; object-fit:cover; display:block; }
.card div{ padding:16px; }
.card h3{ margin:0 0 8px; }
.card p{ margin:0; color:#555; line-height:1.45; }
.card .mini{ margin-top:10px; font-weight:bold; color:#7a1b55; }
.card.small{ width:220px; }
.card.small img{ height:280px; }
.grid-noticias{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:18px; max-width:980px; margin:0 auto; }
.noticia{ background:#fff; border-radius:16px; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.08); display:flex; flex-direction:column; }
.noticia .img{ width:100%; height:160px; object-fit:cover; background:#f6f6f6; }
.noticia .conteudo{ padding:16px; }
.noticia h3{ margin:0 0 8px; color:#b4005a; font-size:16px; line-height:1.25; }
.noticia p{ margin:0; color:#555; line-height:1.5; font-size:14px; }
.noticia .meta{ margin:8px 0 10px; font-size:13px; opacity:.85; }
.noticia a{ font-weight:bold; color:#b4005a; text-decoration:none; }
.noticia a:hover{ text-decoration:underline; }
.acoes-noticias{ text-align:center; margin-bottom:14px; }
.badge{ display:inline-block; margin-top:10px; background: rgba(255,255,255,0.18); padding: 6px 10px; border-radius: 999px; font-size: 12px; font-weight: bold; }
footer{ background:#b983ff; color:white; text-align:center; padding:15px; }
</style>
</head>

<body>

<!-- ===== TODO SEU HTML ORIGINAL (INALTERADO) ===== -->
<!-- (mantido exatamente igual ao que voc√™ enviou) -->

<script src="doramas.js"></script>
<script>

// ===== FUN√á√ÉO SLUG (NOVA) =====
function criarSlug(nome){
  return nome
    .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
    .toLowerCase()
    .replace(/[^a-z0-9]+/g, "-")
    .replace(/(^-|-$)/g, "");
}

// ===== Helpers =====
function parseNota(nota){
  const m = String(nota || "").match(/[\d]+([.,]\d+)?/);
  if(!m) return 0;
  return parseFloat(m[0].replace(",", "."));
}

// ===== Top 5 (LINK CORRIGIDO) =====
function carregarTop5(){
  const area = document.getElementById("top5-cards");
  if(!area || !Array.isArray(doramas)) return;

  const top = [...doramas]
    .map(d => ({...d, _notaNum: parseNota(d.nota)}))
    .sort((a,b) => b._notaNum - a._notaNum)
    .slice(0, 5);

  area.innerHTML = top.map(d => `
    <div class="card click small" onclick="window.location.href='/doramas/${criarSlug(d.nome)}.html'">
      <img src="${d.imagem}" alt="${d.nome}" loading="lazy">
      <div>
        <h3>${d.nome}</h3>
        <div class="mini">‚≠ê ${d.nota || ""}</div>
      </div>
    </div>
  `).join("");
}

// ===== Dorama da Semana (LINK CORRIGIDO) =====
function carregarDoramaDaSemana() {
  const area = document.getElementById("dorama-semana");
  area.innerHTML = "";
  const escolhido = doramas[Math.floor(Math.random() * doramas.length)];
  area.innerHTML = `
    <div class="card click" onclick="window.location.href='/doramas/${criarSlug(escolhido.nome)}.html'">
      <img src="${escolhido.imagem}" alt="${escolhido.nome}" loading="lazy">
      <div>
        <h3>${escolhido.nome}</h3>
        <p>${(escolhido.descricao || "").replaceAll("\n","<br>")}</p>
        <div class="mini">‚≠ê ${escolhido.nota || ""}</div>
      </div>
    </div>
  `;
}

// ===== Busca (LINK CORRIGIDO) =====
function setupBuscaHome(){
  const input = document.getElementById("buscaHome");
  const box = document.getElementById("sugestoes");
  if(!input || !box) return;

  function esconder(){ box.style.display = "none"; box.innerHTML = ""; }

  function mostrar(lista){
    if(!lista.length){ esconder(); return; }
    box.innerHTML = lista.map(d => `
      <div class="item" data-nome="${d.nome}">
        <img src="${d.imagem}" alt="${d.nome}">
        <div>
          <div class="nome">${d.nome}</div>
          <div class="nota">‚≠ê ${d.nota || ""}</div>
        </div>
      </div>
    `).join("");
    box.style.display = "block";
  }

  input.addEventListener("input", () => {
    const q = (input.value || "").toLowerCase().trim();
    if(q.length < 2) return esconder();

    const resultados = doramas
      .filter(d => (d.nome || "").toLowerCase().includes(q))
      .slice(0, 6);

    mostrar(resultados);
  });

  box.addEventListener("click", (e) => {
    const item = e.target.closest(".item");
    if(!item) return;
    const nome = item.getAttribute("data-nome");
    window.location.href = "/doramas/" + criarSlug(nome) + ".html";
  });

  input.addEventListener("keydown", (e) => {
    if(e.key === "Enter"){
      const q = (input.value || "").toLowerCase().trim();
      const primeiro = doramas.find(d => (d.nome || "").toLowerCase().includes(q));
      if(primeiro){
        window.location.href = "/doramas/" + criarSlug(primeiro.nome) + ".html";
      }
    }
  });
}

// ===== Init =====
window.onload = () => {
  carregarTop5();
  setupBuscaHome();
  carregarDoramaDaSemana();
  carregarNoticiasAutomaticas(false);
};

</script>

</body>
</html>
